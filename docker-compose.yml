version: '3.8'

services:
  kaizen-flow:
    build: .
    container_name: kaizen-flow
    restart: unless-stopped
    ports:
      - "80:80"
    environment:
      # MariaDB â€” connect via Docker network using container name
      - DB_HOST=mariadb-eqfd-mariadb-1
      - DB_PORT=3306
      - DB_USER=myapp_user
      - DB_PASSWORD=narq87pf5Jt9vcSF5BiLPm940b9OwN2Z
      - DB_NAME=myapp
      # OpenClaw
      - OPENCLAW_URL=http://host.docker.internal:18789/hooks/wake
      - OPENCLAW_TOKEN=your_secret_token_here
      # Server
      - PORT=3001
      - NODE_ENV=production
      # API Key for external access (MCP/API)
      - API_KEY=kzf_a7x9m2p4q8w1e5r3t6y0
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      - mariadb-network

networks:
  mariadb-network:
    external: true
    name: mariadb-eqfd_default
